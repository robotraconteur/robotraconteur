<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Robot Raconteur Core C++ Library: Service Definitions #{service_definition}</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Robot Raconteur Core C++ Library
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Service Definitions #{service_definition} </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The following example code shows the code contained in the "experimental.create2.robdef" file. It is a <em>service definition</em>. Service definition files are plain text files that describe the <em>object types</em> and <em>value types</em> (data types). Object types are <em>references</em>, meaning that on the client they are simply an advanced reference (sometimes called a "proxy") to the service. Value types are the actual data that are transmitted between client and service. They are always passed by <em>value</em>, meaning that they are copied between the client or service when transmitted. </p><pre class="fragment">#Service to provide sample interface to the iRobot Create
service experimental.create2

stdver 0.10

struct SensorPacket
    field uint8 ID
    field uint8[] Data
end

object Create
    constant int16 DRIVE_STRAIGHT 32767
    constant int16 SPIN_CLOCKWISE -1
    constant int16 SPIN_COUNTERCLOCKWISE 1 

    function void Drive(int16 velocity, int16 radius)

    function void StartStreaming()
    function void StopStreaming()

    property int32 DistanceTraveled [readonly]
    property int32 AngleTraveled [readonly]
    property uint8 Bumpers [readonly]

    event Bump()

    wire SensorPacket packets [readonly]

    callback uint8[] play_callback(int32 DistanceTraveled, int32 AngleTraveled)
end
</pre><p>The first line in the service definition contains the keyword <code>service</code> followed by the name of the service type. The names of services follow similar rules to Java package names. For experimental software, the name should be prefixed with <code>experimental</code>, for example <code>experimental.create2</code>. For hobbyists and standalone software, the name should be prefixed with <code>community</code> and your username, for example <code>community.myusername.create</code>, where <code>myusername</code> is replaced with your robotraconteur.com username. If a domain name for an organization is available it can be used in the same way as Java packages, for example <code>com.wasontech.examples.create2</code>. Unless you have valid ownership of a domain, <code>experimenta</code> or <code>community</code> should be used.</p>
<p>Next in the service there should be <code>stdver</code> and the minimum version of Robot Raconteur required to access the service. For now this should be <code>0.10</code>. Example <code>createinterface</code> does not show it, but there can also be one or more <code>import</code> to reference structures and objects in other service definitions. The rest of service definition defines the <em>structures</em> and <em>objects</em> of the service definition. (Lines starting with <code>#</code> are comments.)</p>
<h1><a class="anchor" id="value_types"></a>
Value Types</h1>
<p>Value types are the data that are passed between the client and service. Value types can be <em>primitives</em>, <em>structures</em>, <em>pods</em>, <em>namedarrays</em>, <em>maps</em>, <em>lists</em> <em>multidimensional arrays</em>, or <em>enums</em>.</p>
<h2>Primitives</h2>
<p>Primitives consist of scalar numbers, single dimensional number arrays, and strings. The table below contains the primitives that are available for use. Primitive numerical types can be turned into arrays by appending brackets <code>[]</code> to the end, for example <code>int32[]</code> is an array of 32 bit signed integers. If a fixed size array is desired, a number can be included between the brackets for the desired array size, for example <code>int32[8]</code> has a fixed length of 8 integers. If an array is desired that has a maximum size, a <code>-</code> sign can be included in the brackets, for example <code>int32[100-]</code> can have up to 100 integers. Strings are always arrays so the brackets are not valid. The <code>void</code> type is only used for function declarations that do not have a return value.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Type </th><th class="markdownTableHeadNone">Bytes/Element </th><th class="markdownTableHeadNone">Description  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>void</code> </td><td class="markdownTableBodyNone">0 </td><td class="markdownTableBodyNone">Void  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>double</code> </td><td class="markdownTableBodyNone">8 </td><td class="markdownTableBodyNone">Double precision floating point  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>single</code> </td><td class="markdownTableBodyNone">4 </td><td class="markdownTableBodyNone">Single precision floating point  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>int8</code> </td><td class="markdownTableBodyNone">1 </td><td class="markdownTableBodyNone">Signed 8-bit integer  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>uint8</code> </td><td class="markdownTableBodyNone">1 </td><td class="markdownTableBodyNone">Unsigned 8-bit integer  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>int16</code> </td><td class="markdownTableBodyNone">2 </td><td class="markdownTableBodyNone">Signed 16-bit integer  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>uint16</code> </td><td class="markdownTableBodyNone">2 </td><td class="markdownTableBodyNone">Unsigned 16-bit integer  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>int32</code> </td><td class="markdownTableBodyNone">4 </td><td class="markdownTableBodyNone">Signed 32-bit integer  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>uint32</code> </td><td class="markdownTableBodyNone">4 </td><td class="markdownTableBodyNone">Unsigned 32-bit integer  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>int64</code> </td><td class="markdownTableBodyNone">8 </td><td class="markdownTableBodyNone">Signed 64-bit integer  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>uint64</code> </td><td class="markdownTableBodyNone">8 </td><td class="markdownTableBodyNone">Unsigned 64-bit integer  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>string</code> </td><td class="markdownTableBodyNone">1 </td><td class="markdownTableBodyNone">UTF-8 string  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>cdouble</code> </td><td class="markdownTableBodyNone">16 </td><td class="markdownTableBodyNone">Complex double precision floating point  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>csingle</code> </td><td class="markdownTableBodyNone">8 </td><td class="markdownTableBodyNone">Complex single precision floating point  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>bool</code> </td><td class="markdownTableBodyNone">1 </td><td class="markdownTableBodyNone">Logical boolean  </td></tr>
</table>
<h2>Structures</h2>
<p>Structures are collections of value types; structures can contain primitives, other structures, maps, or multidimensional arrays. The example <code>experimental.create2</code> service definition shows the definition of the structure <code>SensorPacket</code>. A structure is started with the keyword <code>struct</code> followed by the structure name. It is ended with the <code>end</code> keyword. The entries in the structure are defined with the keyword <code>field</code> followed by the type, and finally the name of the field. If a structure from a different service definition is used, first the referenced service definition is imported at the top of the service definition and the structure is referenced by the external service definition <code>dot</code> the name of the structure.</p>
<h2>Pods</h2>
<p>Pods (short for "plain-old-data") are similar to structures, but are more restricted to ensure they have the same size. All data stored in pods are stored contiguously (c-style), while structs use pointers to the data. Pods can only contain pods, arrays of pods (fixed or max length), namedarrays, and namedarrays arrays (fixed or max length). Only numeric primitives may be used; strings, structs, lists, and maps may not be stored in pods. A pod is started with the keyword <code>pod</code> followed by the pod name. It is ended with the <code>end</code> keyword. The entries in the pod are defined with the keyword <code>field</code> followed by the type, and finally the name of the field. If a pod from a different service definition is used, first the referenced service definition is imported at the top of the service definition and the pod is referenced by the external service definition <code>dot</code> the name of the pod. Pods can be used with arrays and multi-dim arrays.</p>
<h2>Namedarrays</h2>
<p>Namedarrays are a union type designed to store numeric arrays that also have specific meanings attached to each entry. An example is a 3D vector. The vector can either be viewed as a 3x1 array, or as a structure containing three fields, (x,y,z). A namedarray stores the contained data as a primitive array, but allows the data to be viewed as a structure. Namedarrays should be used when possible since they have the most compact memory format. Namedarrays can only contain numeric primitives, fixed numeric primitive arrays (no multidimarrays), other namedarrays (with the same numeric type), and fixed arrays of namedarrays. A namedarray is started with the keyword <code>namedarray</code> followed by the namedarray name. It is ended with the <code>end</code> keyword. The entries in the namedarray are defined with the keyword <code>field</code> followed by the type, and finally the name of the field. If a namedarray from a different service definition is used, first the referenced service definition is imported at the top of the service definition and the namedarray is referenced by the external service definition <code>dot</code> the name of the namedarray. Namedarrays can be used with arrays and multi-dim arrays.</p>
<h2>Maps</h2>
<p>Maps can either be keyed by <code>int32</code> or <code>string</code>. In other languages they would be called <code>Dictionary</code>, <code>Hashtable</code>, or <code>Map</code>. The contained data is a value type, but the contained data may not be another container type (map or list). They are created with curly braces. For example, <code>string{int32}</code> would be a map of strings keyed by an integer. <code>string{string}</code> would be a map of strings keyed by another string. <code>SensorPacket{string}</code> and <code>int32[]{int32}</code> are also valid examples. <code>string{int32}{int32}</code> is <b>not</b> valid. There can only be one dimension of map keying and/or lists.</p>
<h2>Lists</h2>
<p>Lists follow similar rules to maps. They are created with curly braces. For example, <code>string{list}</code> would be a list of strings. <code>SensorPacket{list}</code> and <code>int32[]{list}</code> are also valid examples. <code>string{list}{list}</code> is <b>not</b> valid. There can only be one dimension of lists and/or map keying.</p>
<h2>Multidimensional Arrays</h2>
<p>The multidimensional arrays allow for the transmission of real or complex matrices of any dimension. They are defined by putting a <code>*</code> inside the brackets of an array. For example, <code>double[*]</code> defines a multidimensional array of doubles. Multidimensional arrays can also have fixed dimensions. For example <code>double[3,3]</code> defines a 3x3 matrix. The dimensions are in matrix (column-major) order.</p>
<h2>Enums</h2>
<p>Enums are a special representation of int32 that names each value. Enums are aliases, with the value be stored as int32 internally. An enum is started with the keyword <code>enum</code> followed by the enum name. It is ended with the <code>end</code> keyword. The values are specified with a <code>name = value</code> format, separated by commas. Values can be signed integers, unsigned hexadecimal, or omitted to implicitly increment from the last value. </p><pre class="fragment">enum myenum
    value1 = -1,
    value2 = 0xF1,
    value3,
    value4
end
</pre><h2>varvalue</h2>
<p>In certain situations it may be desirable to put in a "wildcard" value type. The varvalue type allows this. Use with caution!</p>
<p><b>Note: structs, maps, lists, and varvalue can be null. All other types are non-nullable. (NULL, None, etc. depending on language).</b></p>
<h1><a class="anchor" id="object_types"></a>
Object Types</h1>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
