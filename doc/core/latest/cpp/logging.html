<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Robot Raconteur Core C++ Library: Logging</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Robot Raconteur Core C++ Library
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Logging </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Robot Raconteur version 0.9.3 introduced logging capabilities. 1200+ log points have been inserted into the core library to assist developers using the library. These log points provide detailed insight into the behavior of the library and assist with tracing the location and cause of errors.</p>
<p>Log data is contained in "records" which have the following form:</p>
<div class="fragment"><div class="line">class ROBOTRACONTEUR_CORE_API RRLogRecord</div>
<div class="line">{</div>
<div class="line">public:</div>
<div class="line">    RR_WEAK_PTR&lt;RobotRaconteurNode&gt; Node;</div>
<div class="line">    RobotRaconteur_LogLevel Level;</div>
<div class="line">    RobotRaconteur_LogComponent Component;</div>
<div class="line">    std::string ComponentName;</div>
<div class="line">    std::string ComponentObjectID;</div>
<div class="line">    int64_t Endpoint;</div>
<div class="line">    std::string ServicePath;</div>
<div class="line">    std::string Member;</div>
<div class="line">    std::string Message;</div>
<div class="line">    boost::posix_time::ptime Time;</div>
<div class="line">    std::string SourceFile;</div>
<div class="line">    uint32_t SourceLine;</div>
<div class="line">    std::string ThreadID;</div>
<div class="line">    std::string FiberID;</div>
<div class="line">};</div>
</div><!-- fragment --><p>The record contains the originating node, the level of the log message, the component the message originated from, the Robot Raconteur endpoint id, the service path, the object member, the timestamp of the message, the source file an line of the log point, and the thread/coroutine fiber.</p>
<p>By default log messages are sent to <code>stderr</code>. They can optionally be sent to a file using <code>FileLogRecordHandler</code>. The log records have the following default text format, where italic are left out if not specified: </p><pre class="fragment">[Time (as ISO)] [LogLevel] [ThreadID,FiberID] [NodeID] [Component,*ComponentName*,*ComponentObjectID*] [Endpoint,*ServicePath*,*Member*] *[SourceFile,SourceLine]* Message
</pre><p>Log messages can have the following levels:</p>
<div class="fragment"><div class="line">enum RobotRaconteur_LogLevel</div>
<div class="line">{</div>
<div class="line">    RobotRaconteur_LogLevel_Trace, // Used to trace the activity of the node. Disabled in Release builds</div>
<div class="line">    RobotRaconteur_LogLevel_Debug, // Notification of errors or important activity, use to debug unexpected behavior</div>
<div class="line">    RobotRaconteur_LogLevel_Info, // Information about activity that can be logged during normal operation</div>
<div class="line">    RobotRaconteur_LogLevel_Warning, // Warnings of potential errors</div>
<div class="line">    RobotRaconteur_LogLevel_Error, // Notification of non-fatal errors</div>
<div class="line">    RobotRaconteur_LogLevel_Fatal, // Notification of fatal errors that may affect program stability</div>
<div class="line">    RobotRaconteur_LogLevel_Disable=1000 // Disable all logging</div>
<div class="line">};</div>
</div><!-- fragment --><p>Log levels are set using the <code>RobotRaconteurNode::SetLogLevel(level)</code> function. Logging may also be configured using the <code>RobotRaconteurNode::SetLogLevelFromEnvVariable()</code> function. This function is called automatically by <code>NodeSetup</code>, and by Python and Matlab clients. The environmental variable <code>ROBOTRACONTEUR_LOG_LEVEL</code> is used to set the logging level. It can have the following values: <code>TRACE</code>, <code>DEBUG</code>, 'INFO<code>,</code>WARNING<code>,</code>ERROR<code>,</code>FATAL`. Log levels can also be configured using <a class="el" href="command_line_options.html">Command Line Options</a>.</p>
<p>For example, on Linux and Mac OSX, enable debug log level using: </p><pre class="fragment">export ROBOTRACONTEUR_LOG_LEVEL=DEBUG
</pre><p>for Windows, use: </p><pre class="fragment">set ROBOTRACONTEUR_LOG_LEVEL=DEBUG
</pre><p>Records are typically created using the <code>ROBOTRACONTEUR_LOG</code> macros. These can be found in <a class="el" href="_logging_8h.html">Logging.h</a>. These macros are named for the log level, and can optionally include component, path, and component name information.</p>
<p>Records are passed to the node using the <code>RobotRaconteurNode::LogRecord()</code> function. By default, the result is sent to <code>stderr</code>. The function <code>RobotRaconteurNode::SetLogRecordHandler(handler)</code> can be used to send the log record to handler. See below for examples.</p>
<h1>Enable Debug Logging Examples</h1>
<p>Examples of enabling Debug level logging:</p>
<h2>Env Variable</h2>
<p>Linux: </p><pre class="fragment">export ROBOTRACONTEUR_LOG_LEVEL=DEBUG
</pre><p>Windows: </p><pre class="fragment">set ROBOTRACONTEUR_LOG_LEVEL=DEBUG
</pre><h2>C++</h2>
<pre class="fragment">RobotRaconteurNode::s()-&gt;SetLogLevel(RobotRaconteur_LogLevel_Debug);
</pre><h2>C</h2>
<pre class="fragment">RobotRaconteurNode.s.SetLogLevel(LogLevel.LogLevel_Debug);
</pre><h2>Java</h2>
<pre class="fragment">RobotRaconteurNode.s().setLogLevel(LogLevel.LogLevel_Debug);
</pre><h2>Python</h2>
<pre class="fragment">RRN.SetLogLevel(RR.LogLevel_Debug)
</pre><h2>MATLAB</h2>
<pre class="fragment">RobotRaconteur.SetLogLevel('DEBUG')
</pre><h1>Save log to file</h1>
<h2>C++</h2>
<pre class="fragment">FileLogRecordHandlerPtr log_handler = RR_MAKE_SHARED&lt;FileLogRecordHandler&gt;();
log_handler.OpenFile("my_log.txt");
RobotRaconteurNode::s()-&gt;SetLogRecordHandler(log_handler);
</pre><h2>C</h2>
<pre class="fragment">var log_handler = new FileLogRecordHandler();
log_handler.OpenFile("my_log.txt");
RobotRaconteurNode.s.SetLogRecordHandler(log_handler);
</pre><h2>Java</h2>
<pre class="fragment">FileLogRecordHandler log_handler = new FileLogRecordHandler();
log_handler.openFile("my_log.txt");
RobotRaconteurNode.s().setLogRecordHandler(log_handler);
</pre><h2>Python</h2>
<pre class="fragment">log_handler = RR.FileLogRecordHandler()
log_handler.OpenFile("my_log.txt")
RRN.SetLogRecordHandler(log_handler)
</pre><h2>MATLAB</h2>
<pre class="fragment">RobotRaconteur.OpenLogFile('my_log.txt')
</pre> </div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
